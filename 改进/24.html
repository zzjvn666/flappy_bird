    <!DOCTYPE html>
<html lang="zh-CN"><head><meta charset="UTF-8"><style>.nodata  main {width:1000px;margin: auto;}</style></head><body class="nodata " style=""><div class="main_father clearfix d-flex justify-content-center " style="height:100%;"> <div class="container clearfix " id="mainBox"><main><div class="blog-content-box">
<meta name="referrer" content="no-referrer">
<link rel="stylesheet" type="text/css" href="https://2.lz787.com/assets/1.css">

        <link rel="stylesheet" type="text/css" href="https://csdnimg.cn/release/blogv2/dist/pc/themesSkin/skin-yellow/skin-yellow-28d34ab5fa.min.css"><div class="blog-content-box">
    <div class="article-header-box">
        <div class="article-header">
            <div class="article-title-box">
                <h1 class="title-article" id="articleContentId">YOLOv5改进系列（24）——替换主干网络之MobileViTv3（移动端轻量化网络的进一步升级）</h1>
            </div>
            <div class="article-info-box">
                <div class="article-bar-top">
                    <img class="article-type-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/original.png" alt="">
                    <div class="bar-content">
                      <a class="follow-nickName vip-name" href="https://jrs0511.blog.csdn.net" target="_blank" rel="noopener" title="路人贾'ω'">路人贾'ω'</a>
                    <img class="article-time-img article-heard-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newCurrentTime2.png" alt="">
                        <span class="time">于&nbsp;2023-09-25 12:30:59&nbsp;发布</span>
                   <div class="read-count-box">
                      <img class="article-read-img article-heard-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/articleReadEyes2.png" alt="">
                      <span class="read-count">阅读量4k</span>
                      <a id="blog_detail_zk_collection" class="un-collection" data-report-click='{"mod":"popu_823","spm":"1001.2101.3001.4232","ab":"new"}'>
                          <img class="article-collect-img article-heard-img un-collect-status isdefault" style="display:inline-block" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollect2.png" alt="">
                          <img class="article-collect-img article-heard-img collect-status isactive" style="display:none" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollectionActive2.png" alt="">
                          <span class="name">收藏</span>
                          <span class="get-collection">
                              15
                          </span>
                      </a>
                      <div class="read-count-box is-like">
                        <img class="article-read-img article-heard-img" style="display:none" id="is-like-imgactive-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Active.png" alt="">
                        <img class="article-read-img article-heard-img" style="display:block" id="is-like-img-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Black.png" alt="">
                        <span class="read-count" id="blog-digg-num">点赞数
                            5
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="blog-tags-box">
                    <div class="tags-box artic-tag-box">
                            <span class="label">分类专栏：</span>
                                <a class="tag-link" href="https://blog.csdn.net/weixin_43334693/category_12233704.html" target="_blank" rel="noopener">YOLOv5入门＋实践＋改进</a>
                            <span class="label">文章标签：</span>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"YOLO","ab":"new","extra":"{\"searchword\":\"YOLO\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"YOLO","ab":"new","extra":"{\"searchword\":\"YOLO\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=YOLO&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">YOLO</a>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"transformer","ab":"new","extra":"{\"searchword\":\"transformer\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"transformer","ab":"new","extra":"{\"searchword\":\"transformer\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=transformer&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">transformer</a>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"深度学习","ab":"new","extra":"{\"searchword\":\"深度学习\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"深度学习","ab":"new","extra":"{\"searchword\":\"深度学习\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=深度学习&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">深度学习</a>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"计算机视觉","ab":"new","extra":"{\"searchword\":\"计算机视觉\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"计算机视觉","ab":"new","extra":"{\"searchword\":\"计算机视觉\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=计算机视觉&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">计算机视觉</a>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"目标检测","ab":"new","extra":"{\"searchword\":\"目标检测\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"目标检测","ab":"new","extra":"{\"searchword\":\"目标检测\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=目标检测&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">目标检测</a>
                    </div>
                </div>
                <div class="slide-content-box">
                    <div class="article-copyright">
                        <div class="creativecommons">
                            版权声明：本文为博主原创文章，遵循<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接和本声明。
                        </div>
                        <div class="article-source-link">
                            本文链接：<a href="https://blog.csdn.net/weixin_43334693/article/details/133199471" target="_blank">https://blog.csdn.net/weixin_43334693/article/details/133199471</a>
                        </div>
                    </div>
                </div>
                
                <div class="operating">
                    <a class="href-article-edit slide-toggle">版权</a>
                </div>
            </div>
        </div>

    </div>
    <div id="blogHuaweiyunAdvert"></div>
        <div id="blogColumnPayAdvert">
            <div class="column-group">
                <div class="column-group-item column-group0 column-group-item-one">
                    <div class="item-l">
                        <a class="item-target" href="https://blog.csdn.net/weixin_43334693/category_12233704.html" target="_blank" title="YOLOv5入门＋实践＋改进"
                        data-report-view='{"spm":"1001.2101.3001.6332"}'
                        data-report-click='{"spm":"1001.2101.3001.6332"}'>
                            <img class="item-target" src="https://img-blog.csdnimg.cn/0c61c23a5a1448488da55b6e4e1d5d58.png?x-oss-process=image/resize,m_fixed,h_224,w_224" alt="">
                            <span class="title item-target">
                                <span>
                                <span class="tit">YOLOv5入门＋实践＋改进</span>
                                    <span class="dec">专栏收录该内容</span>
                                </span>
                            </span>
                        </a>
                    </div>
                    <div class="item-m">
                        <span>47 篇文章</span>
                        <span>1055 订阅</span>
                        <span class="old-add-new-box">
                            <span class="price">yen99.90</span>
                            <span class="oldprice">yen299.90</span>
                        </span>
                    </div>
                    <div class="item-r">
                                    <a class="item-target article-column-subscribe">已订阅
                                    </a>
                                    <a class="item-target column-studyvip-discount column-studyvip-pass"
                                    data-report-view='{"spm":"1001.2015.3001.8590"}'
                                    data-report-click='{"spm":"1001.2015.3001.8590"}'>8折续费
                                    </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="learning_the_member_box">
            <a href="https://www.csdn.net/vip?utm_source=bkzl_cjhy_ckqy" target="_blank">
                <div class="left"><img src="https://csdnimg.cn/release/blogv2/dist/pc/img/iconVIpCrown.png" alt=""><span>您已是超级会员，正在免费阅读会员专享内容</span></div>
                <div class="right"><span>查看更多超级会员权益</span><img src="https://csdnimg.cn/release/blogv2/dist/components/img/vipIconArrowLeftWhite.png" alt=""></div>
            </a>
        </div>
      <div class="ai-abstract-box">
         <div class="ai-abstract">
          <div class="abstract-content">
            <img class="lock-img" src="https://img-home.csdnimg.cn/images/20240711042549.png" alt="">
            本文介绍了如何在YOLOv5中替换主干网络为MobileViTv3，详细阐述了MobileViTv3的结构优势，并提供了具体的实现步骤，包括在common.py中添加模块、修改yolo.py、创建自定义yaml配置文件以及验证加入成功的方法。
          </div>
          <span>摘要由CSDN通过智能技术生成</span>
        </div>
      </div>
    <article class="baidu_pl">
        <div id="article_content" class="article_content clearfix">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/kdoc_html_views-1a98987dfd.css">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-704d5b9767.css">
             
                <div id="content_views" class="htmledit_views">
                    <p></p> 
<p><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/7f30cb441e3fbc6c5aa1e2886fc1d9ce.gif" /><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/75a213d9e1e88088f54fe797f262764b.png" /></p> 
<p><img alt="962f7cb1b48f44e29d9beb1d499d0530.gif" height="62" src="https://i-blog.csdnimg.cn/blog_migrate/ac3c5d6bfbcbf982e8e9e3632d7f20d1.gif" width="62" /><strong>【YOLOv5改进系列】前期回顾&#xff1a;</strong></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130564848?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;0&#xff09;——重要性能指标与训练结果评价及分析">YOLOv5改进系列&#xff08;0&#xff09;——重要性能指标与训练结果评价及分析</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130551913?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;1&#xff09;——添加SE注意力机制">YOLOv5改进系列&#xff08;1&#xff09;——添加SE注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130587102?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;2&#xff09;——添加CBAM注意力机制">YOLOv5改进系列&#xff08;2&#xff09;——添加CBAM注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130619604?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;3&#xff09;——添加CA注意力机制">YOLOv5改进系列&#xff08;3&#xff09;——添加CA注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130641318?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;4&#xff09;——添加ECA注意力机制">YOLOv5改进系列&#xff08;4&#xff09;——添加ECA注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130832933?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;5&#xff09;——替换主干网络之 MobileNetV3">YOLOv5改进系列&#xff08;5&#xff09;——替换主干网络之 MobileNetV3</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131008642?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;6&#xff09;——替换主干网络之 ShuffleNetV2">YOLOv5改进系列&#xff08;6&#xff09;——替换主干网络之 ShuffleNetV2</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131031541?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;7&#xff09;——添加SimAM注意力机制">YOLOv5改进系列&#xff08;7&#xff09;——添加SimAM注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131053284?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;8&#xff09;——添加SOCA注意力机制">YOLOv5改进系列&#xff08;8&#xff09;——添加SOCA注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131207097?csdn_share_tail&#61;{"type":"blog","rType":"article","rId":"131207097","source":"weixin_43334693"}" title="YOLOv5改进系列&#xff08;9&#xff09;——替换主干网络之EfficientNetv2">YOLOv5改进系列&#xff08;9&#xff09;——替换主干网络之EfficientNetv2</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131235113?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;10&#xff09;——替换主干网络之GhostNet">YOLOv5改进系列&#xff08;10&#xff09;——替换主干网络之GhostNet</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131350224?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;11&#xff09;——添加损失函数之EIoU、AlphaIoU、SIoU、WIoU">YOLOv5改进系列&#xff08;11&#xff09;——添加损失函数之EIoU、AlphaIoU、SIoU、WIoU</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131461294?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;12&#xff09;——更换Neck之BiFPN">YOLOv5改进系列&#xff08;12&#xff09;——更换Neck之BiFPN</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131513850?spm&#61;1001.2014.3001.5502" title="YOLOv5改进系列&#xff08;13&#xff09;——更换激活函数之SiLU&#xff0c;ReLU&#xff0c;ELU&#xff0c;Hardswish&#xff0c;Mish&#xff0c;Softplus&#xff0c;AconC系列等">YOLOv5改进系列&#xff08;13&#xff09;——更换激活函数之SiLU&#xff0c;ReLU&#xff0c;ELU&#xff0c;Hardswish&#xff0c;Mish&#xff0c;Softplus&#xff0c;AconC系列等</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131552028?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;14&#xff09;——更换NMS&#xff08;非极大抑制&#xff09;之 DIoU-NMS、CIoU-NMS、EIoU-NMS、GIoU-NMS 、SIoU-NMS、Soft-NMS">YOLOv5改进系列&#xff08;14&#xff09;——更换NMS&#xff08;非极大抑制&#xff09;之 DIoU-NMS、CIoU-NMS、EIoU-NMS、GIoU-NMS 、SIoU-NMS、Soft-NMS</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131613721?spm&#61;1001.2014.3001.5502" title="YOLOv5改进系列&#xff08;15&#xff09;——增加小目标检测层">YOLOv5改进系列&#xff08;15&#xff09;——增加小目标检测层</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131973273?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;16&#xff09;——添加EMA注意力机制&#xff08;ICASSP2023|实测涨点&#xff09;">YOLOv5改进系列&#xff08;16&#xff09;——添加EMA注意力机制&#xff08;ICASSP2023|实测涨点&#xff09;</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/131999141?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;17&#xff09;——更换IoU之MPDIoU&#xff08;ELSEVIER 2023|超越WIoU、EIoU等|实测涨点&#xff09;">YOLOv5改进系列&#xff08;17&#xff09;——更换IoU之MPDIoU&#xff08;ELSEVIER 2023|超越WIoU、EIoU等|实测涨点&#xff09;</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/132070079?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;18&#xff09;——更换Neck之AFPN&#xff08;全新渐进特征金字塔|超越PAFPN|实测涨点&#xff09;">YOLOv5改进系列&#xff08;18&#xff09;——更换Neck之AFPN&#xff08;全新渐进特征金字塔|超越PAFPN|实测涨点&#xff09;</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/132161488?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;19&#xff09;——替换主干网络之Swin TransformerV1&#xff08;参数量更小的ViT模型&#xff09;">YOLOv5改进系列&#xff08;19&#xff09;——替换主干网络之Swin TransformerV1&#xff08;参数量更小的ViT模型&#xff09;</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/132203200?spm&#61;1001.2014.3001.5502" title="YOLOv5改进系列&#xff08;20&#xff09;——添加BiFormer注意力机制&#xff08;CVPR2023|小目标涨点神器&#xff09;">YOLOv5改进系列&#xff08;20&#xff09;——添加BiFormer注意力机制&#xff08;CVPR2023|小目标涨点神器&#xff09;</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/132211831?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;21&#xff09;——替换主干网络之RepViT&#xff08;清华 ICCV 2023|最新开源移动端ViT&#xff09;">YOLOv5改进系列&#xff08;21&#xff09;——替换主干网络之RepViT&#xff08;清华 ICCV 2023|最新开源移动端ViT&#xff09;</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/132367429?csdn_share_tail&#61;{"type":"blog","rType":"article","rId":"132367429","source":"weixin_43334693"}" title="YOLOv5改进系列&#xff08;22&#xff09;——替换主干网络之MobileViTv1&#xff08;一种轻量级的、通用的移动设备 ViT&#xff09;">YOLOv5改进系列&#xff08;22&#xff09;——替换主干网络之MobileViTv1&#xff08;一种轻量级的、通用的移动设备 ViT&#xff09;</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/132428203?spm&#61;1001.2014.3001.5502" title="YOLOv5改进系列&#xff08;23&#xff09;——替换主干网络之MobileViTv2&#xff08;移动视觉 Transformer 的高效可分离自注意力机制&#xff09;">YOLOv5改进系列&#xff08;23&#xff09;——替换主干网络之MobileViTv2&#xff08;移动视觉 Transformer 的高效可分离自注意力机制&#xff09;</a></p> 
<p style="text-align:center;"><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/86839dfe5fe7e59488cf10cc3d4041e3.gif" /></p> 
<hr /> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="一、MobileViT v3介绍    -toc" style="margin-left:0px;"><a href="#一、MobileViT v3介绍    " rel="nofollow">&#x1f680;一、MobileViT v3介绍    </a></p> 
<p id="二、具体添加方法 -toc" style="margin-left:0px;"><a href="#二、具体添加方法 " rel="nofollow">&#x1f680;二、具体添加方法 </a></p> 
<p id="第①步：在common.py中添加SE模块-toc" style="margin-left:80px;"><a href="#第①步：在common.py中添加SE模块" rel="nofollow">第①步&#xff1a;在common.py中添加MobileViT v3模块</a></p> 
<p id=" 第②步：在yolo.py文件里的parse_model函数加入类名-toc" style="margin-left:80px;"><a href="# 第②步：在yolo.py文件里的parse_model函数加入类名" rel="nofollow">第②步&#xff1a;修改yolo.py文件</a></p> 
<p id=" 第③步：创建自定义的yaml文件  -toc" style="margin-left:80px;"><a href="# 第③步：创建自定义的yaml文件  " rel="nofollow">第③步&#xff1a;创建自定义的yaml文件  </a></p> 
<p id="第④步 验证是否加入成功-toc" style="margin-left:80px;"><a href="#第④步 验证是否加入成功" rel="nofollow">第④步 验证是否加入成功</a></p> 
<p id="本人YOLOv5系列导航-toc" style="margin-left:0px;"><a href="#本人YOLOv5系列导航" rel="nofollow">&#x1f31f;本人YOLOv5系列导航</a></p> 
<p style="text-align:center;"><img alt="" height="102" src="https://i-blog.csdnimg.cn/blog_migrate/3709898b1adfc5eb46af11a6ed72c8ce.gif" width="326" /></p> 
<h2 id="一、MobileViT v3介绍    " style="background-color:transparent;">&#x1f680;一、MobileViT v3介绍    </h2> 
<blockquote> 
 <ul><li><strong>论文题目&#xff1a;《MOBILEVITV3: MOBILE-FRIENDLY VISION TRANS-<br /> FORMER WITH SIMPLE AND EFFECTIVE FUSION OF LOCAL, GLOBAL AND INPUT FEATURES》</strong></li><li><strong>论文原文&#xff1a;</strong>  <a href="https://arxiv.org/abs/2209.15159" rel="nofollow" title="https://arxiv.org/abs/2209.15159">https://arxiv.org/abs/2209.15159</a></li><li><strong>源码地址&#xff1a;</strong><a href="https://github.com/micronDLA/MobileViTv3" title="https://github.com/micronDLA/MobileViTv3">https://github.com/micronDLA/MobileViTv3</a></li><li><strong>论文精读&#xff1a;</strong><a href="https://blog.csdn.net/weixin_43334693/article/details/132742052?spm&#61;1001.2014.3001.5502" title="MobileViT v3论文超详细解读&#xff08;翻译&#xff0b;精读&#xff09;_路人贾&#39;ω&#39;的博客-CSDN博客">MobileViT v3论文超详细解读&#xff08;翻译&#xff0b;精读&#xff09;_路人贾&#39;ω&#39;的博客-CSDN博客</a></li></ul> 
</blockquote> 
<p style="text-align:justify;"><span style="color:#000000;">        在之前的研究中&#xff0c;</span><span style="color:#1c7331;"><strong>CNN模型足够轻量化但是精准度有待提高</strong></span><span style="color:#000000;">&#xff0c;</span><span style="color:#1a439c;"><strong>ViT模型具有较好的识别能力但是模型参数量大&#xff0c;计算复杂</strong></span><span style="color:#000000;">&#xff0c;都不</span><span style="color:#000000;">能</span><span style="color:#000000;">满足移动端实时高效检测的需求。</span></p> 
<p style="text-align:justify;"><span style="color:#000000;">       </span><span style="color:#fe2c24;"><strong>MobileViT</strong></span>模型是2021年苹果公司提出的基于轻量化的ViT模型&#xff0c;该模型<strong><span style="color:#511b78;">既具备ViT模型准确检测的优越性能</span></strong>&#xff0c;<span style="color:#b95514;"><strong>也具备CNN模型的轻量化优点</strong></span>&#xff0c;能极大程度上减少模型参数&#xff0c;对移动端友好&#xff0c;具备部署于移动设备的可能性。 </p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">     <span style="color:#fe2c24;"><strong> MobileViT v</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#fe2c24;">3</span></span></strong>是该公司<span style="background-color:#ffffff;">2022年9月推出的第3个版本&#xff0c;该模型相较于初始版本有以下四个改进&#xff1a;</span></p> 
<ul><li><span style="background-color:#ffffff;">首先&#xff0c;将3×3卷积层替换为<span style="color:#ff9900;"><strong>1×1</strong></span>卷积层&#xff1b;</span></li><li><span style="background-color:#ffffff;">第二&#xff0c;将<span style="color:#1c7331;">局部表示块和全局表示块</span>的特征融合在一起&#xff1b;</span></li><li><span style="background-color:#ffffff;">第三&#xff0c;在生成</span><span style="background-color:#ffffff;">Mobile</span><span style="background-color:#ffffff;">ViT</span><span style="background-color:#ffffff;"> Block</span><span style="background-color:#ffffff;">输出之前&#xff0c;在<span style="color:#511b78;">融合块中添加输入特征</span>作为最后一步</span><span style="background-color:#ffffff;">&#xff1b;</span></li><li><span style="background-color:#ffffff;">最后&#xff0c;在局部表示块中&#xff0c;将普通的3×3卷积层替换为<span style="color:#be191c;">深度3×3卷积层</span>。</span></li></ul> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"><strong><span style="background-color:#38d8f0;">MobileViTv3网络结构图如下所示&#xff1a;</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/fd544d151fffbf3e5776ac55923b2a3f.png" /></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#f9eda6;">模型预测处理过程如下&#xff1a;</span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">&#xff08;1&#xff09;将输入图像连接<span style="color:#b95514;">3×3标准卷积</span>并做<span style="color:#ff9900;">2倍下采样</span>&#xff1b;之后通过5个MV2模块&#xff08;如图&#xff08;a&#xff09;所示&#xff09;&#xff0c;其中步长为1的MV2模块进行特征提取&#xff0c;步长为2的MV2模块做2倍下采样&#xff1b;</p> 
<p style="margin-left:.0001pt;text-align:justify;">&#xff08;2&#xff09;将得到的特征图间隔传入<span style="color:#1c7892;">MobileViTV3 Block</span>&#xff08;如图&#xff08;b&#xff09;所示&#xff09;和<span style="color:#1a439c;">步长为2的MV2模块</span>&#xff1b;</p> 
<p style="margin-left:.0001pt;text-align:justify;">&#xff08;3&#xff09;接着使用<span style="color:#ad720d;">3×3标准卷积</span>进行通道压缩&#xff1b;</p> 
<p style="margin-left:.0001pt;text-align:justify;">&#xff08;4&#xff09;最后进行全局平均池化来获取预测结果 。</p> 
<hr /> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff9900;"><strong>MobileViT v3 Block</strong></span>模块是<span style="color:#fe2c24;"><strong><span style="background-color:#ffffff;">MobileViT </span><span style="background-color:#ffffff;">v</span><span style="background-color:#ffffff;">3</span></strong></span>核心部分&#xff0c;由<strong><span style="color:#4da8ee;">局部表征模块</span></strong>、<strong><span style="color:#956fe7;">全局表征模块</span></strong>、<span style="color:#a2e043;"><strong>融合模块</strong></span>三部分组成&#xff0c;具体介绍如下&#xff1a;</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#4da8ee;"><strong>&#xff08;1&#xff09;局部表征模块 </strong></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">对于输入的特征图像<img alt="X\in R^{H\times W\times C}" class="mathcode" src="https://latex.csdn.net/eq?X\in R^{H\times W\times C}" />&#xff08;<img alt="H" class="mathcode" src="https://latex.csdn.net/eq?H" />、<img alt="W" class="mathcode" src="https://latex.csdn.net/eq?W" />为图像的高、宽&#xff1b;<img alt="C" class="mathcode" src="https://latex.csdn.net/eq?C" />为输入特征图像的通道&#xff09; &#xff0c;首先采用一个3×3的深度卷积层和1×1的卷积层得到输出<img alt="X_{L}\in R^{H\times W\times d}" class="mathcode" src="https://latex.csdn.net/eq?X_{L}\in R^{H\times W\times d}" />&#xff08;<img alt="d" class="mathcode" src="https://latex.csdn.net/eq?d" />为输出特征图像的通道&#xff09;。经过局部表征模块可以将特征图像<img alt="X" class="mathcode" src="https://latex.csdn.net/eq?X" />的局部空间信息映射到特定的维度<img alt="d" class="mathcode" src="https://latex.csdn.net/eq?d" />中。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#956fe7;"><strong>&#xff08;2&#xff09;全局表征模块</strong></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">将局部表征模块中的输出<img alt="X_{L}" class="mathcode" src="https://latex.csdn.net/eq?X_{L}" />作为全局表征模块的输入&#xff0c;然后将<img alt="X_{L}" class="mathcode" src="https://latex.csdn.net/eq?X_{L}" />展平为无重叠的图片块<img alt="X_{U}\in R^{P\times N\times d}" class="mathcode" src="https://latex.csdn.net/eq?X_{U}\in R^{P\times N\times d}" />&#xff08;<img alt="P" class="mathcode" src="https://latex.csdn.net/eq?P" />为展平图片块的大小&#xff0c;<img alt="P&#61;w\times h" class="mathcode" src="https://latex.csdn.net/eq?P=w\times h" />&#xff0c;<img alt="w" class="mathcode" src="https://latex.csdn.net/eq?w" />、<img alt="h" class="mathcode" src="https://latex.csdn.net/eq?h" />分别为展平图片块的宽、高&#xff0c;<img alt="N" class="mathcode" src="https://latex.csdn.net/eq?N" />为图片块的个数&#xff0c;<img alt="N&#61;W\times H/P" class="mathcode" src="https://latex.csdn.net/eq?N=W\times H/P" />&#xff09;。随后&#xff0c;将每个图片块上相同位置上的像素<img alt="p\in \left \{ 1,...,P \right \}" class="mathcode" src="https://latex.csdn.net/eq?p\in \left \{ 1,...,P \right \}" />送入Transformer模块中进行编码&#xff0c;得到<img alt="X_{G}\in R^{P\times N\times d}" class="mathcode" src="https://latex.csdn.net/eq?X_{G}\in R^{P\times N\times d}" />。 为了避免图片块之间的信息丢失&#xff0c;在全局表征模块的最后会将编码后的所有图片块重组还原&#xff0c;得到<img alt="X_{F}\in R^{H\times W\times d}" class="mathcode" src="https://latex.csdn.net/eq?X_{F}\in R^{H\times W\times d}" />&#xff0c;然后输出到下一个模块。 </p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="color:#a2e043;">&#xff08;3&#xff09;融合模块</span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">将<img alt="X_{F}" class="mathcode" src="https://latex.csdn.net/eq?X_{F}" />送入特征融合模块中&#xff0c;使其映射到一个低维空间&#xff0c;得到<img alt="X^{&#39;}\in R^{H\times ×W\times ×C}" class="mathcode" src="https://latex.csdn.net/eq?X^{'}\in R^{H\times W\times C}" />。 然后通过拼接操作&#xff0c;将局部表征模块的输出<img alt="X_{L}" class="mathcode" src="https://latex.csdn.net/eq?X_{L}" />与<img alt="X^{&#39;}" class="mathcode" src="https://latex.csdn.net/eq?X^{'}" />拼接起来&#xff0c;得到<img alt="X^{&#39;&#39;}\in R^{H\times ×W\times ×2C}" class="mathcode" src="https://latex.csdn.net/eq?X^{''}\in R^{H\times W\times 2C}" />。接着采用1×1的卷积层来融合局部特征<img alt="X^{&#39;}" class="mathcode" src="https://latex.csdn.net/eq?X^{'}" />与全局特征<img alt="X^{&#39;&#39;}" class="mathcode" src="https://latex.csdn.net/eq?X^{''}" />&#xff0c;得到<img alt="X^{*}\in R^{H\times ×W\times ×2C}" class="mathcode" src="https://latex.csdn.net/eq?X^{*}\in R^{H\times W\times 2C}" />。最后把刚获取的<img alt="X^{*}" class="mathcode" src="https://latex.csdn.net/eq?X^{*}" />和原始<img alt="X" class="mathcode" src="https://latex.csdn.net/eq?X" />进行相加操作&#xff0c;得到输出<img alt="Y\in R^{H\times W\times C}" class="mathcode" src="https://latex.csdn.net/eq?Y\in R^{H\times W\times C}" />。</p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;">该过程需要伪代码可以私聊我~</p> 
</blockquote> 
<hr /> 
<h2 id="二、具体添加方法 " style="background-color:transparent;">&#x1f680;二、具体添加方法 </h2> 
<h4 id="第①步：在common.py中添加SE模块"><strong><span style="background-color:#38d8f0;">第①步&#xff1a;在common.py中添加MobileViT v3模块</span></strong></h4> 
<p><span style="color:#ff9900;"><strong>首先&#xff0c;定义卷积层。</strong></span></p> 
<p>分为1×1卷积层和n×n&#xff08;n&#61;3&#xff09;卷积层</p> 
<pre><code class="language-python">def conv_1x1_bn(inp, oup):
    return nn.Sequential(
        nn.Conv2d(inp, oup, 1, 1, 0, bias&#61;False),
        nn.BatchNorm2d(oup),
        nn.SiLU()
    )

def conv_nxn_bn(inp, oup, kernal_size&#61;3, stride&#61;1):
    return nn.Sequential(
        nn.Conv2d(inp, oup, kernal_size, stride, 1, bias&#61;False),
        nn.BatchNorm2d(oup),
        nn.SiLU()
    )</code></pre> 
<p><span style="color:#1a439c;"> <strong>接着&#xff0c;构造ViT模块。</strong></span></p> 
<p>Transformer Encoder模块中编码</p> 
<pre><code class="language-python">class PreNorm(nn.Module):
    def __init__(self, dim, fn):
        super().__init__()
        self.norm &#61; nn.LayerNorm(dim)
        self.fn &#61; fn # mg
    
    def forward(self, x, **kwargs):
        return self.fn(self.norm(x), **kwargs)

class Attention(nn.Module):
    def __init__(self, dim, heads&#61;8, dim_head&#61;64, dropout&#61;0.):
        super().__init__()
        inner_dim &#61; dim_head *  heads
        project_out &#61; not (heads &#61;&#61; 1 and dim_head &#61;&#61; dim)

        self.heads &#61; heads
        self.scale &#61; dim_head ** -0.5

        self.attend &#61; nn.Softmax(dim &#61; -1)
        self.to_qkv &#61; nn.Linear(dim, inner_dim * 3, bias &#61; False)

        self.to_out &#61; nn.Sequential(
            nn.Linear(inner_dim, dim),
            nn.Dropout(dropout)# mg
        ) if project_out else nn.Identity()

    def forward(self, x):
        qkv &#61; self.to_qkv(x).chunk(3, dim&#61;-1)
        q, k, v &#61; map(lambda t: rearrange(t, &#39;b p n (h d) -&gt; b p h n d&#39;, h &#61; self.heads), qkv)

        dots &#61; torch.matmul(q, k.transpose(-1, -2)) * self.scale
        attn &#61; self.attend(dots)
        out &#61; torch.matmul(attn, v)
        out &#61; rearrange(out, &#39;b p h n d -&gt; b p n (h d)&#39;)
        return self.to_out(out)

class FeedForward(nn.Module):
    def __init__(self, dim, hidden_dim, dropout&#61;0.):
        super().__init__()
        self.net &#61; nn.Sequential(
            nn.Linear(dim, hidden_dim),
            nn.SiLU(),
            nn.Dropout(dropout),
            nn.Linear(hidden_dim, dim),
            nn.Dropout(dropout)
        )
    
    def forward(self, x):
        return self.net(x)

class MBTransformer(nn.Module):
    def __init__(self, dim, depth, heads, dim_head, mlp_dim, dropout&#61;0.):
        super().__init__()
        self.layers &#61; nn.ModuleList([])
        for _ in range(depth):
            self.layers.append(nn.ModuleList([
                PreNorm(dim, Attention(dim, heads, dim_head, dropout)),
                PreNorm(dim, FeedForward(dim, mlp_dim, dropout))
            ]))
    
    def forward(self, x):
        for attn, ff in self.layers:
            x &#61; attn(x) &#43; x
            x &#61; ff(x) &#43; x
        return x
</code></pre> 
<p><span style="color:#511b78;"><strong> 然后&#xff0c;MV2模块。</strong></span></p> 
<p><img alt="" height="200" src="https://i-blog.csdnimg.cn/blog_migrate/0bb18c624fc9aa944e73c57a2fc5b41c.png" width="1121" /></p> 
<p>分为stride&#61;1和stride&#61;2两种。</p> 
<pre><code class="language-python">class MV2Block(nn.Module):
    def __init__(self, inp, oup, stride&#61;1, expansion&#61;4):
        super().__init__()
        self.stride &#61; stride
        assert stride in [1, 2]

        hidden_dim &#61; int(inp * expansion)
        self.use_res_connect &#61; self.stride &#61;&#61; 1 and inp &#61;&#61; oup

        if expansion &#61;&#61; 1:
            self.conv &#61; nn.Sequential(
                # dw
                nn.Conv2d(hidden_dim, hidden_dim, 3, stride, 1, groups&#61;hidden_dim, bias&#61;False),
                nn.BatchNorm2d(hidden_dim),
                nn.SiLU(),
                # pw-linear
                nn.Conv2d(hidden_dim, oup, 1, 1, 0, bias&#61;False),
                nn.BatchNorm2d(oup),
            )
        else:
            self.conv &#61; nn.Sequential(
                # pw
                nn.Conv2d(inp, hidden_dim, 1, 1, 0, bias&#61;False),
                nn.BatchNorm2d(hidden_dim),
                nn.SiLU(),
                # dw
                nn.Conv2d(hidden_dim, hidden_dim, 3, stride, 1, groups&#61;hidden_dim, bias&#61;False),
                nn.BatchNorm2d(hidden_dim),
                nn.SiLU(),
                # pw-linear
                nn.Conv2d(hidden_dim, oup, 1, 1, 0, bias&#61;False),
                nn.BatchNorm2d(oup),
            )

    def forward(self, x):
        if self.use_res_connect:
            return x &#43; self.conv(x)
        else:
            return self.conv(x)</code></pre> 
<p><span style="color:#be191c;"> <strong>最后&#xff0c;核心模块 MobileViTv3_block。</strong></span></p> 
<p><span style="color:#0d0016;">介绍部分看上面就行~</span></p> 
<pre><code class="language-python">class MobileViTv3_block(nn.Module):
    def __init__(self, channel, dim, depth&#61;2, kernel_size&#61;3, patch_size&#61;(2, 2), mlp_dim&#61;int(64*2), dropout&#61;0.):
        super().__init__()
        self.ph, self.pw &#61; patch_size
        self.mv01 &#61; MV2Block(channel, channel) 
        self.conv1 &#61; conv_nxn_bn(channel, channel, kernel_size)
        self.conv3 &#61; conv_1x1_bn(dim, channel)
        self.conv2 &#61; conv_1x1_bn(channel, dim)
        self.transformer &#61; MBTransformer(dim, depth, 4, 8, mlp_dim, dropout)
        self.conv4 &#61; conv_nxn_bn(2 * channel, channel, kernel_size)

    def forward(self, x):
        y &#61; x.clone()
        x &#61; self.conv1(x)
        x &#61; self.conv2(x)
        z &#61; x.clone()
        _, _, h, w &#61; x.shape
        x &#61; rearrange(x, &#39;b d (h ph) (w pw) -&gt; b (ph pw) (h w) d&#39;, ph&#61;self.ph, pw&#61;self.pw)
        x &#61; self.transformer(x)
        x &#61; rearrange(x, &#39;b (ph pw) (h w) d -&gt; b d (h ph) (w pw)&#39;, h&#61;h//self.ph, w&#61;w//self.pw, ph&#61;self.ph, pw&#61;self.pw)
        x &#61; self.conv3(x)
        x &#61; torch.cat((x, z), 1)
        x &#61; self.conv4(x)
        x &#61; x &#43; y
        x &#61; self.mv01(x)
        return x
</code></pre> 
<p><strong>以下是完整代码&#xff1a;</strong></p> 
<p>将以下代码复制粘贴到<span style="color:#ff9900;"><strong>common.py</strong></span>文件的末尾</p> 
<pre><code class="language-python">from einops import rearrange


def conv_1x1_bn(inp, oup):
    return nn.Sequential(
        nn.Conv2d(inp, oup, 1, 1, 0, bias&#61;False),
        nn.BatchNorm2d(oup),
        nn.SiLU()
    )

def conv_nxn_bn(inp, oup, kernal_size&#61;3, stride&#61;1):
    return nn.Sequential(
        nn.Conv2d(inp, oup, kernal_size, stride, 1, bias&#61;False),
        nn.BatchNorm2d(oup),
        nn.SiLU()
    )

class PreNorm(nn.Module):
    def __init__(self, dim, fn):
        super().__init__()
        self.norm &#61; nn.LayerNorm(dim)
        self.fn &#61; fn # mg
    
    def forward(self, x, **kwargs):
        return self.fn(self.norm(x), **kwargs)

class Attention(nn.Module):
    def __init__(self, dim, heads&#61;8, dim_head&#61;64, dropout&#61;0.):
        super().__init__()
        inner_dim &#61; dim_head *  heads
        project_out &#61; not (heads &#61;&#61; 1 and dim_head &#61;&#61; dim)

        self.heads &#61; heads
        self.scale &#61; dim_head ** -0.5

        self.attend &#61; nn.Softmax(dim &#61; -1)
        self.to_qkv &#61; nn.Linear(dim, inner_dim * 3, bias &#61; False)

        self.to_out &#61; nn.Sequential(
            nn.Linear(inner_dim, dim),
            nn.Dropout(dropout)# mg
        ) if project_out else nn.Identity()

    def forward(self, x):
        qkv &#61; self.to_qkv(x).chunk(3, dim&#61;-1)
        q, k, v &#61; map(lambda t: rearrange(t, &#39;b p n (h d) -&gt; b p h n d&#39;, h &#61; self.heads), qkv)

        dots &#61; torch.matmul(q, k.transpose(-1, -2)) * self.scale
        attn &#61; self.attend(dots)
        out &#61; torch.matmul(attn, v)
        out &#61; rearrange(out, &#39;b p h n d -&gt; b p n (h d)&#39;)
        return self.to_out(out)

class FeedForward(nn.Module):
    def __init__(self, dim, hidden_dim, dropout&#61;0.):
        super().__init__()
        self.net &#61; nn.Sequential(
            nn.Linear(dim, hidden_dim),
            nn.SiLU(),
            nn.Dropout(dropout),
            nn.Linear(hidden_dim, dim),
            nn.Dropout(dropout)
        )
    
    def forward(self, x):
        return self.net(x)

class MBTransformer(nn.Module):
    def __init__(self, dim, depth, heads, dim_head, mlp_dim, dropout&#61;0.):
        super().__init__()
        self.layers &#61; nn.ModuleList([])
        for _ in range(depth):
            self.layers.append(nn.ModuleList([
                PreNorm(dim, Attention(dim, heads, dim_head, dropout)),
                PreNorm(dim, FeedForward(dim, mlp_dim, dropout))
            ]))
    
    def forward(self, x):
        for attn, ff in self.layers:
            x &#61; attn(x) &#43; x
            x &#61; ff(x) &#43; x
        return x

class MV2Block(nn.Module):
    def __init__(self, inp, oup, stride&#61;1, expansion&#61;4):
        super().__init__()
        self.stride &#61; stride
        assert stride in [1, 2]

        hidden_dim &#61; int(inp * expansion)
        self.use_res_connect &#61; self.stride &#61;&#61; 1 and inp &#61;&#61; oup

        if expansion &#61;&#61; 1:
            self.conv &#61; nn.Sequential(
                # dw
                nn.Conv2d(hidden_dim, hidden_dim, 3, stride, 1, groups&#61;hidden_dim, bias&#61;False),
                nn.BatchNorm2d(hidden_dim),
                nn.SiLU(),
                # pw-linear
                nn.Conv2d(hidden_dim, oup, 1, 1, 0, bias&#61;False),
                nn.BatchNorm2d(oup),
            )
        else:
            self.conv &#61; nn.Sequential(
                # pw
                nn.Conv2d(inp, hidden_dim, 1, 1, 0, bias&#61;False),
                nn.BatchNorm2d(hidden_dim),
                nn.SiLU(),
                # dw
                nn.Conv2d(hidden_dim, hidden_dim, 3, stride, 1, groups&#61;hidden_dim, bias&#61;False),
                nn.BatchNorm2d(hidden_dim),
                nn.SiLU(),
                # pw-linear
                nn.Conv2d(hidden_dim, oup, 1, 1, 0, bias&#61;False),
                nn.BatchNorm2d(oup),
            )

    def forward(self, x):
        if self.use_res_connect:
            return x &#43; self.conv(x)
        else:
            return self.conv(x)

class MobileViTv3_block(nn.Module):
    def __init__(self, channel, dim, depth&#61;2, kernel_size&#61;3, patch_size&#61;(2, 2), mlp_dim&#61;int(64*2), dropout&#61;0.):
        super().__init__()
        self.ph, self.pw &#61; patch_size
        self.mv01 &#61; MV2Block(channel, channel) 
        self.conv1 &#61; conv_nxn_bn(channel, channel, kernel_size)
        self.conv3 &#61; conv_1x1_bn(dim, channel)
        self.conv2 &#61; conv_1x1_bn(channel, dim)
        self.transformer &#61; MBTransformer(dim, depth, 4, 8, mlp_dim, dropout)
        self.conv4 &#61; conv_nxn_bn(2 * channel, channel, kernel_size)

    def forward(self, x):
        y &#61; x.clone()
        x &#61; self.conv1(x)
        x &#61; self.conv2(x)
        z &#61; x.clone()
        _, _, h, w &#61; x.shape
        x &#61; rearrange(x, &#39;b d (h ph) (w pw) -&gt; b (ph pw) (h w) d&#39;, ph&#61;self.ph, pw&#61;self.pw)
        x &#61; self.transformer(x)
        x &#61; rearrange(x, &#39;b (ph pw) (h w) d -&gt; b d (h ph) (w pw)&#39;, h&#61;h//self.ph, w&#61;w//self.pw, ph&#61;self.ph, pw&#61;self.pw)
        x &#61; self.conv3(x)
        x &#61; torch.cat((x, z), 1)
        x &#61; self.conv4(x)
        x &#61; x &#43; y
        x &#61; self.mv01(x)
        return x


</code></pre> 
<hr /> 
<h4 id=" 第②步：在yolo.py文件里的parse_model函数加入类名"><strong><span style="background-color:#a2e043;">第②步&#xff1a;修改yolo.py文件</span></strong></h4> 
<p>再来修改<span style="color:#4da8ee;"><strong>yolo.py</strong></span>&#xff0c;在<span style="color:#ff9900;"><strong>parse_model</strong></span>函数中找到<strong><span style="background-color:#fef2f0;"> elif m is Concat: </span></strong>语句&#xff0c;在其后面加上下面代码&#xff1a;</p> 
<pre><code class="language-python">        elif m in [MobileViTv3_block]:
            c1, c2 &#61; ch[f], args[0]
            if c2 !&#61; no:  
                c2 &#61; make_divisible(c2 * gw, 8)
            args &#61; [c1, c2]
            if m in [MobileViTv3_block]:
                args.insert(2, n)  
                n &#61; 1
</code></pre> 
<hr /> 
<h4 id=" 第③步：创建自定义的yaml文件  "><span style="background-color:#ffd900;"> </span><strong><span style="background-color:#ffd900;">第③步&#xff1a;创建自定义的yaml文件</span></strong><span style="background-color:#ffd900;">  </span></h4> 
<p>yaml文件配置完整代码如下&#xff1a;</p> 
<pre><code class="language-python"># YOLOv5 &#x1f680; by Ultralytics, GPL-3.0 license

# Parameters
nc: 80  # number of classes
depth_multiple: 0.33  # model depth multiple
width_multiple: 0.50  # layer channel iscyy multiple
anchors:
  - [10,13, 16,30, 33,23]  # P3/8
  - [30,61, 62,45, 59,119]  # P4/16
  - [116,90, 156,198, 373,326]  # P5/32


# YOLOv5 v6.0 backbone
backbone:
  # [from, number, module, args]
  [[-1, 1, Conv, [64, 6, 2, 2]],  # 0-P1/2
   [-1, 1, Conv, [128, 3, 2]],  # 1-P2/4
   [-1, 3, C3, [128]],
   [-1, 1, Conv, [256, 3, 2]],  # 3-P3/8
   [-1, 6, MobileViTv3_block, [256]],
   [-1, 1, Conv, [512, 3, 2]],  # 5-P4/16
   [-1, 9, C3, [512]],
   [-1, 1, Conv, [1024, 3, 2]],  # 7-P5/32
   [-1, 3, C3, [1024]],
   [-1, 1, SPPF, [1024, 5]],  # 9
  ]
# YOLOv5 v6.0 head
head:
  [[-1, 1, Conv, [512, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, &#39;nearest&#39;]],
   [[-1, 6], 1, Concat, [1]],  # cat backbone P4
   [-1, 3, C3, [512, False]],  # 13

   [-1, 1, Conv, [256, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, &#39;nearest&#39;]],
   [[-1, 4], 1, Concat, [1]],  # cat backbone P3
   [-1, 3, C3, [256, False]],  # 17 (P3/8-small)

   [-1, 1, Conv, [256, 3, 2]],
   [[-1, 14], 1, Concat, [1]],  # cat head P4
   [-1, 3, C3, [512, False]],  # 20 (P4/16-medium)

   [-1, 1, Conv, [512, 3, 2]],
   [[-1, 10], 1, Concat, [1]],  # cat head P5
   [-1, 3, C3, [1024, False]],  # 23 (P5/32-large)

   [[17, 20, 23], 1, Detect, [nc, anchors]],  # Detect(P3, P4, P5)
  ]</code></pre> 
<hr /> 
<h4 id="第④步 验证是否加入成功"><span style="background-color:#ff9900;">第④步 验证是否加入成功</span></h4> 
<p>运行<span style="color:#4da8ee;"><strong>yolo.py</strong></span></p> 
<p><img alt="" height="945" src="https://i-blog.csdnimg.cn/blog_migrate/39c3d274fc83ad1f23ee4a192e48886b.png" width="1200" /></p> 
<p> 这样就OK啦~</p> 
<blockquote> 
 <p><strong>代码参考&#xff1a; </strong></p> 
 <p><a href="https://yoloair.blog.csdn.net/article/details/127107758" rel="nofollow" title="YOLOv5、YOLOv8改进主干&#xff1a;全网首发最新 MobileViTv3 系列最强改进版本&#xff08;三&#xff09;&#xff5c;轻量化Transformer视觉转换器&#xff0c;简单有效地融合了本地全局和输入特征&#xff0c;高效涨点_yolov8轻量化改进_芒果汁没有芒果的博客-CSDN博客">YOLOv5、YOLOv8改进主干&#xff1a;全网首发最新 MobileViTv3 系列最强改进版本&#xff08;三&#xff09;&#xff5c;轻量化Transformer视觉转换器&#xff0c;简单有效地融合了本地全局和输入特征&#xff0c;高效涨点_yolov8轻量化改进_芒果汁没有芒果的博客-CSDN博客</a></p> 
</blockquote> 
<hr /> 
<h2 id="本人YOLOv5系列导航" style="background-color:transparent;">&#x1f31f;本人YOLOv5系列导航</h2> 
<p><img alt="962f7cb1b48f44e29d9beb1d499d0530.gif" height="69" src="https://i-blog.csdnimg.cn/blog_migrate/ac3c5d6bfbcbf982e8e9e3632d7f20d1.gif" width="69" />   &#x1f340;<strong><strong><strong><strong><a href="https://so.csdn.net/so/search?q&#61;YOLOv5源码&amp;spm&#61;1001.2101.3001.7020" title="YOLOv5源码">YOLOv5源码</a></strong></strong></strong>详解系列&#xff1a;</strong>  </p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129356033?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;1&#xff09;——项目目录结构解析">YOLOv5源码逐行超详细注释与解读&#xff08;1&#xff09;——项目目录结构解析</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129349094?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;2&#xff09;——推理部分detect.py">YOLOv5源码逐行超详细注释与解读&#xff08;2&#xff09;——推理部分detect.py</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129460666?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;3&#xff09;——训练部分train.py">YOLOv5源码逐行超详细注释与解读&#xff08;3&#xff09;——训练部分train.py</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129649553?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;4&#xff09;——验证部分val&#xff08;test&#xff09;.py">YOLOv5源码逐行超详细注释与解读&#xff08;4&#xff09;——验证部分val&#xff08;test&#xff09;.py</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129697521?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;5&#xff09;——配置文件yolov5s.yaml">YOLOv5源码逐行超详细注释与解读&#xff08;5&#xff09;——配置文件yolov5s.yaml</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129803802?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;6&#xff09;——网络结构&#xff08;1&#xff09;yolo.py">YOLOv5源码逐行超详细注释与解读&#xff08;6&#xff09;——网络结构&#xff08;1&#xff09;yolo.py</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129854764?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;7&#xff09;——网络结构&#xff08;2&#xff09;common.py">YOLOv5源码逐行超详细注释与解读&#xff08;7&#xff09;——网络结构&#xff08;2&#xff09;common.py</a> </p> 
<hr /> 
<p><img alt="962f7cb1b48f44e29d9beb1d499d0530.gif" height="69" src="https://i-blog.csdnimg.cn/blog_migrate/ac3c5d6bfbcbf982e8e9e3632d7f20d1.gif" width="69" />   &#x1f340;<strong><strong><strong><strong><strong><strong><strong><strong><a href="https://so.csdn.net/so/search?q&#61;YOLOv5源码&amp;spm&#61;1001.2101.3001.7020" title="YOLOv5入门实践">YOLOv5入门实践</a></strong></strong></strong></strong></strong></strong></strong>系列&#xff1a;</strong>  </p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129981848?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;1&#xff09;——手把手带你环境配置搭建">YOLOv5入门实践&#xff08;1&#xff09;——手把手带你环境配置搭建</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129995604?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;2&#xff09;——手把手教你利用labelimg标注数据集">YOLOv5入门实践&#xff08;2&#xff09;——手把手教你利用labelimg标注数据集</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130025866?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;3&#xff09;——手把手教你划分自己的数据集">YOLOv5入门实践&#xff08;3&#xff09;——手把手教你划分自己的数据集</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130043351?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;4&#xff09;——手把手教你训练自己的数据集">YOLOv5入门实践&#xff08;4&#xff09;——手把手教你训练自己的数据集</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130044342?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;5&#xff09;——从零开始&#xff0c;手把手教你训练自己的目标检测模型&#xff08;包含pyqt5界面&#xff09;">YOLOv5入门实践&#xff08;5&#xff09;——从零开始&#xff0c;手把手教你训练自己的目标检测模型&#xff08;包含pyqt5界面&#xff09;</a> </p> 
<hr /> 
<p style="text-align:center;"><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/16dba0d75cda098194f5e0d3473cbff1.gif" /></p>
                </div>
        </div>
        <div id="treeSkill"></div>
    </article>
  <script>
    $(function() {
      setTimeout(function () {
        var mathcodeList = document.querySelectorAll('.htmledit_views img.mathcode');
        if (mathcodeList.length > 0) {
          for (let i = 0; i < mathcodeList.length; i  ) {
            if (mathcodeList[i].complete) {
              if (mathcodeList[i].naturalWidth === 0 || mathcodeList[i].naturalHeight === 0) {
                var alt = mathcodeList[i].alt;
                alt = '\\('   alt   '\\)';
                var curSpan = $('<span class="img-codecogs"></span>');
                curSpan.text(alt);
                $(mathcodeList[i]).before(curSpan);
                $(mathcodeList[i]).remove();
              }
            } else {
              mathcodeList[i].onerror = function() {
                var alt = mathcodeList[i].alt;
                alt = '\\('   alt   '\\)';
                var curSpan = $('<span class="img-codecogs"></span>');
                curSpan.text(alt);
                $(mathcodeList[i]).before(curSpan);
                $(mathcodeList[i]).remove();
              };
            }
          }
          MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
        }
      }, 500)
    });
  </script>
</div>
<div class="directory-boxshadow-dialog" style="display:none;">
  <div class="directory-boxshadow-dialog-box">
  </div>
   <div class="vip-limited-time-offer-box-new" id="vip-limited-time-offer-box-new">
      <img class="limited-img limited-img-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-newWhite.png">
      <div class="vip-limited-time-top">
        确定要放弃本次机会？
      </div>
      <span class="vip-limited-time-text">福利倒计时</span>
      <div class="limited-time-box-new">
        <span class="time-hour"></span>
        <i>:</i>
        <span class="time-minite"></span>
        <i>:</i>
        <span class="time-second"></span>
      </div>
      <div class="limited-time-vip-box">
        <p>
          <img class="coupon-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-roup.png">
          <span class="def">立减 yen</span>
          <span class="active limited-num"></span>
        </p>
        <span class="">普通VIP年卡可用</span>
      </div>
      <a class="limited-time-btn-new" href="https://mall.csdn.net/vip" data-report-click='{"spm":"1001.2101.3001.9621"}' data-report-query='spm=1001.2101.3001.9621'>立即使用</a>
  </div>
</div>    <div class="more-toolbox-new" id="toolBarBox">
      <div class="left-toolbox">
        <div class="toolbox-left">
            <div class="profile-box">
              <a class="profile-href" target="_blank" href="https://jrs0511.blog.csdn.net"><img class="profile-img" src="https://profile-avatar.csdnimg.cn/da983c398fca4f14a19ea48d137f6ca3_weixin_43334693.jpg!1">
                <span class="profile-name">
                  路人贾'ω'
                </span>
              </a>
            </div>
            <div class="profile-attend">
                <a class="tool-attend tool-bt-button tool-unbt-attend" href="javascript:;" data-report-view='{"mod":"1592215036_002","spm":"1001.2101.3001.4232","extend1":"已关注"}'>已关注</a>
              <a class="tool-item-follow active-animation" style="display:none;">关注</a>
            </div>
        </div>
        <div class="toolbox-middle">
          <ul class="toolbox-list">
            <li class="tool-item tool-item-size tool-active is-like" id="is-like">
              <a class="tool-item-href">
                <img style="display:none;" id="is-like-imgactive-animation-like" class="animation-dom active-animation" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarThumbUpactive.png" alt="">
                <img class="isactive" style="display:none" id="is-like-imgactive" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2021Active.png" alt="">
                <img class="isdefault" style="display:block" id="is-like-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2021Black.png" alt="">
                <span id="spanCount" class="count ">
                    5
                </span>
              </a>
              <div class="tool-hover-tip"><span class="text space">点赞</span></div>
            </li>
            <li class="tool-item tool-item-size tool-active is-unlike" id="is-unlike">
              <a class="tool-item-href">
                <img class="isactive" style="margin-right:0px;display:none" id="is-unlike-imgactive" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newUnHeart2021Active.png" alt="">
                <img class="isdefault" style="margin-right:0px;display:block" id="is-unlike-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newUnHeart2021Black.png" alt="">
                <span id="unlikeCount" class="count "></span>
              </a>
              <div class="tool-hover-tip"><span class="text space">踩</span></div>
            </li>
            <li class="tool-item tool-item-size tool-active is-collection ">
              <a class="tool-item-href" href="javascript:;" data-report-click='{"mod":"popu_824","spm":"1001.2101.3001.4130","ab":"new"}'>
                <img style="display:none" id="is-collection-img-collection" class="animation-dom active-animation" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollectionActive.png" alt="">
                <img class="isdefault" id="is-collection-img" style="display:block" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newCollectBlack.png" alt="">
                <img class="isactive" id="is-collection-imgactive" style="display:none" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newCollectActive.png" alt="">
                <span class="count get-collection " data-num="15" id="get-collection">
                    15
                </span>
              </a>
              <div class="tool-hover-tip collect">
                <div class="collect-operate-box">
                  <span class="collect-text" id="is-collection">
                    收藏
                  </span>
                </div>
              </div>
              <div class="tool-active-list">
                <div class="text">
                  觉得还不错?
                  <span class="collect-text" id="tool-active-list-collection">
                    一键收藏
                  </span>
                 <img id="tool-active-list-close" src="https://csdnimg.cn/release/blogv2/dist/pc/img/collectionCloseWhite.png" alt="">
                </div>
              </div>
            </li>
                <li class="tool-item tool-item-size tool-active tool-item-reward">
                  <a class="tool-item-href" href="javascript:;" data-report-click='{"mod":"popu_830","spm":"1001.2101.3001.4237","dest":"","ab":"new"}'>
                    <img class="isdefault reward-bt" id="rewardBtNew" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newRewardBlack.png" alt="打赏">
                    <span class="count"></span>
                  </a>
                  <div class="tool-hover-tip"><span class="text space">打赏</span></div>
                </li>
          <li class="tool-item tool-item-size tool-active tool-item-comment">
            <div class="guide-rr-first">
              <img src="https://csdnimg.cn/release/blogv2/dist/pc/img/guideRedReward01.png" alt="">
              <button class="btn-guide-known">知道了</button>
            </div>
              <a class="tool-item-href go-side-comment" data-report-click='{"spm":"1001.2101.3001.7009"}'>
              <img class="isdefault" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newComment2021Black.png" alt="">
              <span class="count">
                  10
              </span>
            </a>
            <div class="tool-hover-tip"><span class="text space">评论</span></div>
          </li>
          <li class="tool-item tool-item-bar">
          </li>
          <li class="tool-item tool-item-size tool-active tool-QRcode" data-type="article" id="tool-share">
            <a class="tool-item-href" href="javascript:;" data-report-view='{"spm":"3001.4129","extra":{"type":"blogdetail"}}'>
              <img class="isdefault" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newShareBlack.png" alt="">
            </a>
              <div class="QRcode" id="tool-QRcode">
              <div class="share-bg-box">
                <div class="share-content">
                  <a id="copyPosterUrl" data-type="link" class="btn-share">复制链接</a>
                </div>
                <div class="share-content">
                  <a class="btn-share" data-type="qq">分享到 QQ</a>
                </div>
                <div class="share-content">
                  <a class="btn-share" data-type="weibo">分享到新浪微博</a>
                </div>
                <div class="share-code">
                  <div class="share-code-box" id='shareCode'></div>
                  <div class="share-code-text">
                    <img src="https://csdnimg.cn/release/blogv2/dist/pc/img/share/icon-wechat.png" alt="">扫一扫
                  </div>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
      <div class="toolbox-right"><script type="text/javascript" crossorigin src="https://g.csdnimg.cn/common/csdn-login-box/csdn-login-box.js"></script></html>