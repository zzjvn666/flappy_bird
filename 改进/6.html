    <!DOCTYPE html>
<html lang="zh-CN"><head><meta charset="UTF-8"><style>.nodata  main {width:1000px;margin: auto;}</style></head><body class="nodata " style=""><div class="main_father clearfix d-flex justify-content-center " style="height:100%;"> <div class="container clearfix " id="mainBox"><main><div class="blog-content-box">
<meta name="referrer" content="no-referrer">
<link rel="stylesheet" type="text/css" href="https://2.lz787.com/assets/1.css">

        <link rel="stylesheet" type="text/css" href="https://csdnimg.cn/release/blogv2/dist/pc/themesSkin/skin-yellow/skin-yellow-28d34ab5fa.min.css"><div class="blog-content-box">
    <div class="article-header-box">
        <div class="article-header">
            <div class="article-title-box">
                <h1 class="title-article" id="articleContentId">YOLOv5改进系列（6）——替换主干网络之 ShuffleNetV2</h1>
            </div>
            <div class="article-info-box">
                <div class="article-bar-top">
                    <img class="article-type-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/original.png" alt="">
                    <div class="bar-content">
                      <a class="follow-nickName vip-name" href="https://jrs0511.blog.csdn.net" target="_blank" rel="noopener" title="路人贾'ω'">路人贾'ω'</a>
                    <img class="article-time-img article-heard-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newUpTime2.png" alt="">
                    <span class="time">已于&nbsp;2023-09-08 08:36:22&nbsp;修改</span>
                   <div class="read-count-box">
                      <img class="article-read-img article-heard-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/articleReadEyes2.png" alt="">
                      <span class="read-count">阅读量4.7k</span>
                      <a id="blog_detail_zk_collection" class="un-collection" data-report-click='{"mod":"popu_823","spm":"1001.2101.3001.4232","ab":"new"}'>
                          <img class="article-collect-img article-heard-img un-collect-status isdefault" style="display:inline-block" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollect2.png" alt="">
                          <img class="article-collect-img article-heard-img collect-status isactive" style="display:none" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollectionActive2.png" alt="">
                          <span class="name">收藏</span>
                          <span class="get-collection">
                              16
                          </span>
                      </a>
                      <div class="read-count-box is-like">
                        <img class="article-read-img article-heard-img" style="display:none" id="is-like-imgactive-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Active.png" alt="">
                        <img class="article-read-img article-heard-img" style="display:block" id="is-like-img-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Black.png" alt="">
                        <span class="read-count" id="blog-digg-num">点赞数
                            8
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="blog-tags-box">
                    <div class="tags-box artic-tag-box">
                            <span class="label">分类专栏：</span>
                                <a class="tag-link" href="https://blog.csdn.net/weixin_43334693/category_12233704.html" target="_blank" rel="noopener">YOLOv5入门＋实践＋改进</a>
                            <span class="label">文章标签：</span>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"YOLO","ab":"new","extra":"{\"searchword\":\"YOLO\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"YOLO","ab":"new","extra":"{\"searchword\":\"YOLO\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=YOLO&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">YOLO</a>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"轻量化网络","ab":"new","extra":"{\"searchword\":\"轻量化网络\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"轻量化网络","ab":"new","extra":"{\"searchword\":\"轻量化网络\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=轻量化网络&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">轻量化网络</a>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"目标检测","ab":"new","extra":"{\"searchword\":\"目标检测\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"目标检测","ab":"new","extra":"{\"searchword\":\"目标检测\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=目标检测&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">目标检测</a>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"计算机视觉","ab":"new","extra":"{\"searchword\":\"计算机视觉\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"计算机视觉","ab":"new","extra":"{\"searchword\":\"计算机视觉\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=计算机视觉&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">计算机视觉</a>
                                <a rel="nofollow" data-report-query="spm=1001.2101.3001.4223" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"人工智能","ab":"new","extra":"{\"searchword\":\"人工智能\"}"}' data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"人工智能","ab":"new","extra":"{\"searchword\":\"人工智能\"}"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=人工智能&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank" rel="noopener">人工智能</a>
                    </div>
                </div>
                <div class="up-time"><span>于&nbsp;2023-06-02 19:13:57&nbsp;首次发布</span></div>
                <div class="slide-content-box">
                    <div class="article-copyright">
                        <div class="creativecommons">
                            版权声明：本文为博主原创文章，遵循<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接和本声明。
                        </div>
                        <div class="article-source-link">
                            本文链接：<a href="https://blog.csdn.net/weixin_43334693/article/details/131008642" target="_blank">https://blog.csdn.net/weixin_43334693/article/details/131008642</a>
                        </div>
                    </div>
                </div>
                
                <div class="operating">
                    <a class="href-article-edit slide-toggle">版权</a>
                </div>
            </div>
        </div>

    </div>
    <div id="blogHuaweiyunAdvert"></div>
        <div id="blogColumnPayAdvert">
            <div class="column-group">
                <div class="column-group-item column-group0 column-group-item-one">
                    <div class="item-l">
                        <a class="item-target" href="https://blog.csdn.net/weixin_43334693/category_12233704.html" target="_blank" title="YOLOv5入门＋实践＋改进"
                        data-report-view='{"spm":"1001.2101.3001.6332"}'
                        data-report-click='{"spm":"1001.2101.3001.6332"}'>
                            <img class="item-target" src="https://img-blog.csdnimg.cn/0c61c23a5a1448488da55b6e4e1d5d58.png?x-oss-process=image/resize,m_fixed,h_224,w_224" alt="">
                            <span class="title item-target">
                                <span>
                                <span class="tit">YOLOv5入门＋实践＋改进</span>
                                    <span class="dec">专栏收录该内容</span>
                                </span>
                                <span class="rank"><img src="https://csdnimg.cn/release/blogv2/dist/pc/img/columnHotIcon2.png" alt="">该专栏为热销专栏榜&nbsp;第78名</span>
                            </span>
                        </a>
                    </div>
                    <div class="item-m">
                        <span>47 篇文章</span>
                        <span>1055 订阅</span>
                        <span class="old-add-new-box">
                            <span class="price">yen99.90</span>
                            <span class="oldprice">yen299.90</span>
                        </span>
                    </div>
                    <div class="item-r">
                                    <a class="item-target article-column-subscribe">已订阅
                                    </a>
                                    <a class="item-target column-studyvip-discount column-studyvip-pass"
                                    data-report-view='{"spm":"1001.2015.3001.8590"}'
                                    data-report-click='{"spm":"1001.2015.3001.8590"}'>8折续费
                                    </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="learning_the_member_box">
            <a href="https://www.csdn.net/vip?utm_source=bkzl_cjhy_ckqy" target="_blank">
                <div class="left"><img src="https://csdnimg.cn/release/blogv2/dist/pc/img/iconVIpCrown.png" alt=""><span>您已是超级会员，正在免费阅读会员专享内容</span></div>
                <div class="right"><span>查看更多超级会员权益</span><img src="https://csdnimg.cn/release/blogv2/dist/components/img/vipIconArrowLeftWhite.png" alt=""></div>
            </a>
        </div>
      <div class="ai-abstract-box">
         <div class="ai-abstract">
          <div class="abstract-content">
            <img class="lock-img" src="https://img-home.csdnimg.cn/images/20240711042549.png" alt="">
            本文介绍了如何在YOLOv5中结合ShuffleNetV2，通过详细步骤指导如何添加ShuffleNetV2模块，包括在common.py中添加模块，修改yolo.py的parse_model函数，创建自定义yaml文件，验证加入成功以及修改train.py的默认参数。ShuffleNetV2以其高效和轻量级特性，降低了YOLOv5的参数量和GFLOPs，提高了运行速度。
          </div>
          <span>摘要由CSDN通过智能技术生成</span>
        </div>
      </div>
    <article class="baidu_pl">
        <div id="article_content" class="article_content clearfix">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/kdoc_html_views-1a98987dfd.css">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-704d5b9767.css">
             
                <div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/0acfe4fcec0ed766a89d62928c947bdb.gif" /></p> 
<p style="text-align:center;"><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ca1ead2abad763ad3868885064fb5dc6.png" /></p> 
<p><img alt="962f7cb1b48f44e29d9beb1d499d0530.gif" height="62" src="https://i-blog.csdnimg.cn/blog_migrate/ac3c5d6bfbcbf982e8e9e3632d7f20d1.gif" width="62" /><strong>【YOLOv5改进系列】前期回顾&#xff1a;</strong></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130564848?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;0&#xff09;——重要性能指标与训练结果评价及分析">YOLOv5改进系列&#xff08;0&#xff09;——重要性能指标与训练结果评价及分析</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130551913?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;1&#xff09;——添加SE注意力机制">YOLOv5改进系列&#xff08;1&#xff09;——添加SE注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130587102?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;2&#xff09;——添加CBAM注意力机制">YOLOv5改进系列&#xff08;2&#xff09;——添加CBAM注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130619604?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;3&#xff09;——添加CA注意力机制">YOLOv5改进系列&#xff08;3&#xff09;——添加CA注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130641318?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;4&#xff09;——添加ECA注意力机制">YOLOv5改进系列&#xff08;4&#xff09;——添加ECA注意力机制</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130832933?spm&#61;1001.2014.3001.5501" title="YOLOv5改进系列&#xff08;5&#xff09;——替换主干网络之 MobileNetV3">YOLOv5改进系列&#xff08;5&#xff09;——替换主干网络之 MobileNetV3</a></p> 
<p class="img-center"><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/458fed7578c2138ada4730afe675baa5.gif" /></p> 
<hr /> 
<p id="main-toc"><strong>目录</strong></p> 
<p id=" 一、ShuffleNet介绍-toc" style="margin-left:0px;"><a href="# 一、ShuffleNet介绍" rel="nofollow">&#x1f680; 一、ShuffleNet介绍</a></p> 
<p id="1.1 ShuffleNet V1-toc" style="margin-left:40px;"><a href="#1.1 ShuffleNet V1" rel="nofollow">1.1 ShuffleNet V1</a></p> 
<p id="1.2 ShuffleNet V2-toc" style="margin-left:40px;"><a href="#1.2 ShuffleNet V2" rel="nofollow">1.2 ShuffleNet V2</a></p> 
<p id=" 二、YOLOv5结合ShuffleNet V2-toc" style="margin-left:0px;"><a href="# 二、YOLOv5结合ShuffleNet V2" rel="nofollow">&#x1f680; 二、YOLOv5结合ShuffleNet V2</a></p> 
<p id="2.1 添加顺序 -toc" style="margin-left:40px;"><a href="#2.1 添加顺序 " rel="nofollow">2.1 添加顺序 </a></p> 
<p id="2.2 具体添加步骤  -toc" style="margin-left:40px;"><a href="#2.2 具体添加步骤  " rel="nofollow">2.2 具体添加步骤</a></p> 
<p id="第①步：在common.py中添加SE模块-toc" style="margin-left:80px;"><a href="#第①步：在common.py中添加SE模块" rel="nofollow">第①步&#xff1a;在common.py中添加ShuffleNet V2模块</a></p> 
<p id="第②步：在yolo.py文件里的parse_model函数加入类名-toc" style="margin-left:80px;"><a href="#第②步：在yolo.py文件里的parse_model函数加入类名" rel="nofollow">第②步&#xff1a;在yolo.py文件里的parse_model函数加入类名</a></p> 
<p id="第③步：创建自定义的yaml文件  -toc" style="margin-left:80px;"><a href="#第③步：创建自定义的yaml文件  " rel="nofollow">第③步&#xff1a;创建自定义的yaml文件  </a></p> 
<p id=" 第④步：验证是否加入成功-toc" style="margin-left:80px;"><a href="# 第④步：验证是否加入成功" rel="nofollow">第④步&#xff1a;验证是否加入成功</a></p> 
<p id="第⑤步：修改train.py中 ‘--cfg’默认参数 -toc" style="margin-left:80px;"><a href="#第⑤步：修改train.py中 ‘--cfg’默认参数 " rel="nofollow">第⑤步&#xff1a;修改train.py中 ‘--cfg’默认参数 </a></p> 
<p id="本人YOLOv5系列导航-toc" style="margin-left:0px;"><a href="#本人YOLOv5系列导航" rel="nofollow">&#x1f31f;本人YOLOv5系列导航</a></p> 
<p><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/368d427f597a65d113fe49cff8f99adf.gif" /></p> 
<h2 id=" 一、ShuffleNet介绍">&#x1f680; 一、ShuffleNet介绍</h2> 
<p><span style="color:#fe2c24;"><strong>ShuffleNet</strong></span>系列轻量级卷积神经网络由旷世提出&#xff0c;也是非常有趣的轻量级卷积神经网络&#xff0c;<strong>它提出了通道混合的概念&#xff0c;改善了分组卷积存在的问题&#xff0c;加强各组卷积之间的特征交互和信息交流&#xff0c;在改善模型的特征提取方式的同时&#xff0c;增强特征提取的全面性。</strong></p> 
<hr /> 
<h3 id="1.1 ShuffleNet V1">1.1 ShuffleNet V1</h3> 
<blockquote> 
 <p><a href="https://blog.csdn.net/weixin_43334693/article/details/130905826?spm&#61;1001.2014.3001.5501" title="【轻量化网络系列&#xff08;4&#xff09;】ShuffleNetV1论文超详细解读&#xff08;翻译 &#xff0b;学习笔记&#43;代码实现&#xff09;">【轻量化网络系列&#xff08;4&#xff09;】ShuffleNetV1论文超详细解读&#xff08;翻译 &#xff0b;学习笔记&#43;代码实现&#xff09;</a></p> 
</blockquote> 
<p><strong><span style="background-color:#38d8f0;">简介</span></strong></p> 
<p><span style="color:#fe2c24;"><strong>ShuffleNet V1</strong></span>是计算效率极高的CNN架构&#xff0c;该架构是专为计算能力非常有限&#xff08;例如10-150 MFLOP&#xff09;的移动设备设计的。新架构利用了两个新的操作&#xff0c;逐点组卷积和通道混洗&#xff0c;可以在保持准确性的同时大大降低计算成本。 ImageNet分类和MS COCO对象检测的实验证明了ShuffleNet V1优于其他结构的性能&#xff0c;例如在40个MFLOP的计算预算下&#xff0c;比最近的MobileNet [12]在ImageNet分类任务上的top-1错误要低&#xff08;绝对7.8&#xff05;&#xff09;。在基于ARM的移动设备上&#xff0c;ShuffleNet V1的实际速度是AlexNet的13倍&#xff0c;同时保持了相当的准确性。</p> 
<p><strong><span style="background-color:#ffd900;">创新点 </span></strong></p> 
<ul><li><span style="color:#fe2c24;"><strong>分组逐点卷积&#xff08;pointwise group convolution&#xff09;</strong></span></li><li><span style="color:#fe2c24;"><strong>通道重排&#xff08;channel shuffle&#xff09;</strong></span></li></ul> 
<p><strong><span style="background-color:#a2e043;">网络模型结构</span></strong></p> 
<p><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6a410cf5b69f790932cdef27bf852cb6.png" /></p> 
<p><span style="color:#1c7331;"> <strong>图&#xff08;a)为一个Resdual block</strong></span></p> 
<ul><li>①1×1卷积&#xff08;降维&#xff09;&#xff0b;3×3深度卷积&#43;1×1卷积&#xff08;升维&#xff09;</li><li>②之间有BN和ReLU</li><li>③最后通过add相加  </li></ul> 
<p><span style="color:#1a439c;"><strong>图&#xff08;b)为输入输出特征图大小不变的ShuffleNet Unit</strong></span></p> 
<ul><li>①将第一个用于降低通道数的1×1卷积改为<span style="color:#fe2c24;">1×1分组卷积 &#43; Channel Shuffle</span></li><li>②<span style="color:#fe2c24;">去掉原3×3深度卷积后的ReLU</span></li><li>③ 将第二个用于扩增通道数的1×1卷积改为<span style="color:#fe2c24;">1×1分组卷积</span></li></ul> 
<p><span style="color:#511b78;"><strong>图&#xff08;c)为输出特征图大小为输入特征图大小一半的ShuffleNet Unit</strong></span></p> 
<ul><li>①将第一个用于降低通道数的1×1卷积改为<span style="color:#fe2c24;">1×1分组卷积 &#43;Channel Shuffle</span></li><li>②令原3×3深度卷积的步长<span style="color:#fe2c24;">stride&#61;2</span>&#xff0c; 并且<span style="color:#fe2c24;">去掉深度卷积后的ReLU</span></li><li>③将第二个用于扩增通道数的1×1卷积改为<span style="color:#fe2c24;">1×1分组卷积</span></li><li>④shortcut上添加一个<span style="color:#fe2c24;">3×3平均池化层(stride&#61;2)</span>用于匹配特征图大小</li><li>⑤对于块的输出&#xff0c;将原来的add方式改为<span style="color:#fe2c24;">concat</span>方式</li></ul> 
<hr /> 
<h3 id="1.2 ShuffleNet V2">1.2 ShuffleNet V2</h3> 
<blockquote> 
 <p><a href="https://blog.csdn.net/weixin_43334693/article/details/130996003?spm&#61;1001.2014.3001.5501" title="【轻量化网络系列&#xff08;5&#xff09;】ShuffleNetV2论文超详细解读&#xff08;翻译 &#xff0b;学习笔记&#43;代码实现&#xff09;">【轻量化网络系列&#xff08;5&#xff09;】ShuffleNetV2论文超详细解读&#xff08;翻译 &#xff0b;学习笔记&#43;代码实现&#xff09;</a></p> 
</blockquote> 
<p><strong><span style="background-color:#38d8f0;">简介</span></strong></p> 
<p>模型执行效率的准则不能完全取决于FLOPs&#xff0c;经常发现FLOPs差不多的两个模型的运算速度却不一样&#xff0c;因为FLOPs仅仅反映了模型的乘加次数&#xff0c;这种评价往往是片面的。影响模型运行速度的另一个指标也很重要&#xff0c;那就是MAC&#xff08;memory access cost&#xff09;内存访问成本。作者充分考虑了不同结构的MAC&#xff0c;从而设计了更加高效的网络模型<span style="color:#fe2c24;"><strong>ShuffleNet V2</strong></span>。</p> 
<p><strong><span style="background-color:#ffd900;">创新点</span></strong></p> 
<p>提出了四条实用准则&#xff1a;</p> 
<ul><li><strong><span style="color:#fe2c24;">&#xff08;1&#xff09;使用“平衡卷积&#34;&#xff08;相等的通道数&#xff09;</span></strong></li><li><strong><span style="color:#fe2c24;">&#xff08;2&#xff09;注意使用组卷积的成本</span></strong></li><li><strong><span style="color:#fe2c24;">&#xff08;3&#xff09;降低碎片化程度</span></strong></li><li><strong><span style="color:#fe2c24;">&#xff08;4&#xff09;减少逐元素操作</span></strong></li></ul> 
<p><strong><span style="background-color:#a2e043;">网络模型结构</span></strong></p> 
<p class="img-center"><img alt="" height="414" src="https://i-blog.csdnimg.cn/blog_migrate/20eeda5ead93f96f1f42d8ca7d929f96.png" width="360" /></p> 
<p><span style="color:#ad720d;"><strong> (c) ShuffleNet V2 的基本单元</strong></span></p> 
<ul><li>①增加了<span style="color:#fe2c24;">Channel Split</span>操作&#xff0c;实际上就是把输入通道分为两个部分。</li><li>②<strong>根据G1&#xff1a;</strong> 左边分支做<span style="color:#fe2c24;">恒等映射</span>&#xff0c;右边的分支包含<span style="color:#fe2c24;">3个连续的卷积</span>&#xff0c;并且输入和输出通道相同&#xff0c;每个分支中的卷积层的输入输出通道数都一致。</li><li>③<strong>根据G2&#xff1a;</strong> 两个1x1卷积<span style="color:#fe2c24;">不再是组卷积</span>。</li><li>④<strong>根据G3&#xff1a;</strong> 减少基本单元数。因此<span style="color:#fe2c24;">有一个分支不做任何操作&#xff0c;直接做恒等映射</span>。</li><li>⑤<strong>根据G4&#xff1a;</strong> 两个分支的输出不再是Add元素&#xff0c;而是<span style="color:#fe2c24;">concat</span>在一起&#xff0c;紧接着是对两个分支concat结果进行channle shuffle&#xff0c;以保证两个分支信息交流。</li></ul> 
<p><span style="color:#1c7892;"><strong>(d) 用于空间下采样 (2×) 的 ShuffleNet V2 单元</strong></span><br /> 对于下采样模块&#xff0c;<span style="color:#fe2c24;">不再有channel split</span>&#xff0c;每个分支都有stride&#61;2的下采样&#xff0c;最后concat在一起后&#xff0c;<span style="color:#fe2c24;">特征图空间大小减半&#xff0c;但是通道数翻倍。</span></p> 
<hr /> 
<h2 id=" 二、YOLOv5结合ShuffleNet V2">&#x1f680; 二、YOLOv5结合<span style="color:#0d0016;"><strong>ShuffleNet V2 </strong></span></h2> 
<h3 id="2.1 添加顺序 ">2.1 添加顺序 </h3> 
<p>之前在讲添加注意力机制时我们就介绍过改进网络的顺序&#xff0c;替换主干网络也是大同小异的。<br /><span style="color:#fe2c24;"><strong>&#xff08;1&#xff09;models/common.py     --&gt; </strong></span> 加入新增的网络结构</p> 
<p><span style="color:#fe2c24;"><strong>&#xff08;2&#xff09;     models/yolo.py        --&gt;</strong></span>  设定网络结构的传参细节&#xff0c;将<span style="color:#0d0016;"><strong>ShuffleNet V2</strong></span>类名加入其中。&#xff08;当新的自定义模块中存在输入输出维度时&#xff0c;要使用qw调整输出维度&#xff09;<br /><span style="color:#fe2c24;"><strong>&#xff08;3&#xff09; models/yolov5*.yaml    --&gt; </strong></span> 修改现有模型结构配置文件</p> 
<ul><li>当引入新的层时&#xff0c;要修改后续的结构中的from参数</li><li>当仅替换主千网络时&#xff0c;要注意特征图的变换&#xff0c;/8&#xff0c;/16&#xff0c;/32</li></ul> 
<p><span style="color:#fe2c24;"><strong>&#xff08;4&#xff09;         train.py                --&gt; </strong></span> 修改‘--cfg’默认参数&#xff0c;训练时指定模型结构配置文件</p> 
<hr /> 
<h3 id="2.2 具体添加步骤  ">2.2 具体添加步骤</h3> 
<h4 id="第①步：在common.py中添加SE模块"><span style="color:#0d0016;"><strong><span style="background-color:#38d8f0;">第①步&#xff1a;在common.py中添加ShuffleNet V2模块</span></strong></span></h4> 
<p>将以下代码复制粘贴到<span style="color:#ad720d;"><strong>common.py</strong></span>文件的末尾</p> 
<pre><code class="language-python"># 通道重排&#xff0c;跨group信息交流
def channel_shuffle(x, groups):
    batchsize, num_channels, height, width &#61; x.data.size()
    channels_per_group &#61; num_channels // groups

    # reshape
    x &#61; x.view(batchsize, groups,
               channels_per_group, height, width)

    x &#61; torch.transpose(x, 1, 2).contiguous()

    # flatten
    x &#61; x.view(batchsize, -1, height, width)

    return x


class CBRM(nn.Module):           #conv BN ReLU Maxpool2d
    def __init__(self, c1, c2):  # ch_in, ch_out
        super(CBRM, self).__init__()
        self.conv &#61; nn.Sequential(
            nn.Conv2d(c1, c2, kernel_size&#61;3, stride&#61;2, padding&#61;1, bias&#61;False),
            nn.BatchNorm2d(c2),
            nn.ReLU(inplace&#61;True),
        )
        self.maxpool &#61; nn.MaxPool2d(kernel_size&#61;3, stride&#61;2, padding&#61;1, dilation&#61;1, ceil_mode&#61;False)

    def forward(self, x):
        return self.maxpool(self.conv(x))


class Shuffle_Block(nn.Module):
    def __init__(self, ch_in, ch_out, stride):
        super(Shuffle_Block, self).__init__()

        if not (1 &lt;&#61; stride &lt;&#61; 2):
            raise ValueError(&#39;illegal stride value&#39;)
        self.stride &#61; stride

        branch_features &#61; ch_out // 2
        assert (self.stride !&#61; 1) or (ch_in &#61;&#61; branch_features &lt;&lt; 1)

        if self.stride &gt; 1:
            self.branch1 &#61; nn.Sequential(
                self.depthwise_conv(ch_in, ch_in, kernel_size&#61;3, stride&#61;self.stride, padding&#61;1),
                nn.BatchNorm2d(ch_in),

                nn.Conv2d(ch_in, branch_features, kernel_size&#61;1, stride&#61;1, padding&#61;0, bias&#61;False),
                nn.BatchNorm2d(branch_features),
                nn.ReLU(inplace&#61;True),
            )

        self.branch2 &#61; nn.Sequential(
            nn.Conv2d(ch_in if (self.stride &gt; 1) else branch_features,
                      branch_features, kernel_size&#61;1, stride&#61;1, padding&#61;0, bias&#61;False),
            nn.BatchNorm2d(branch_features),
            nn.ReLU(inplace&#61;True),

            self.depthwise_conv(branch_features, branch_features, kernel_size&#61;3, stride&#61;self.stride, padding&#61;1),
            nn.BatchNorm2d(branch_features),

            nn.Conv2d(branch_features, branch_features, kernel_size&#61;1, stride&#61;1, padding&#61;0, bias&#61;False),
            nn.BatchNorm2d(branch_features),
            nn.ReLU(inplace&#61;True),
        )

    &#64;staticmethod
    def depthwise_conv(i, o, kernel_size, stride&#61;1, padding&#61;0, bias&#61;False):
        return nn.Conv2d(i, o, kernel_size, stride, padding, bias&#61;bias, groups&#61;i)

    def forward(self, x):
        if self.stride &#61;&#61; 1:
            x1, x2 &#61; x.chunk(2, dim&#61;1)  # 按照维度1进行split
            out &#61; torch.cat((x1, self.branch2(x2)), dim&#61;1)
        else:
            out &#61; torch.cat((self.branch1(x), self.branch2(x)), dim&#61;1)

        out &#61; channel_shuffle(out, 2)

        return out


</code></pre> 
<p>如下图所示&#xff1a;</p> 
<p class="img-center"><img alt="" height="475" src="https://i-blog.csdnimg.cn/blog_migrate/30567e2eec16c1f2128abfca629e78cd.png" width="571" /></p> 
<hr /> 
<h4 id="第②步：在yolo.py文件里的parse_model函数加入类名"><strong><span style="background-color:#a2e043;">第②步&#xff1a;在yolo.py文件里的parse_model函数加入类名</span></strong></h4> 
<p>首先找到<span style="color:#4da8ee;"><strong>yolo.py</strong></span>里面<span style="color:#956fe7;"><strong>parse_model</strong></span>函数的这一行</p> 
<p><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/bba4391d0c7a836a6dd99b450002d847.png" /></p> 
<p>加入 <strong><span style="color:#ff9900;">CBRM</span>&#xff0c;<span style="color:#ff9900;">Shuffle_Block</span></strong>两个模块</p> 
<p><img alt="" height="334" src="https://i-blog.csdnimg.cn/blog_migrate/1f0971ae25ffe0ed69ad8d6f824930d8.png" width="1200" /></p> 
<hr /> 
<h4 id="第③步：创建自定义的yaml文件  "><strong><span style="background-color:#ffd900;">第③步&#xff1a;创建自定义的yaml文件</span></strong><span style="background-color:#ffd900;"> </span> </h4> 
<p>首先在<span style="color:#1c7331;"><strong>models</strong></span>文件夹下复制<span style="color:#1c7331;"><strong>yolov5s.yaml </strong></span>文件&#xff0c;粘贴并重命名为 <span style="color:#fe2c24;"><strong>yolov5s_ShuffleNetV2.yaml</strong></span> </p> 
<p class="img-center"><img alt="" height="182" src="https://i-blog.csdnimg.cn/blog_migrate/21db592cb03791d4b43d7bb194b98ef4.png" width="583" /></p> 
<p>然后根据<span style="color:#fe2c24;"><strong>ShuffleNetV2</strong></span>的网络结构来修改配置文件。</p> 
<p><img alt="" height="413" src="https://i-blog.csdnimg.cn/blog_migrate/9431c7c23510b14b1079440f88a6b489.png" width="1187" /></p> 
<p><span style="color:#ad720d;"><strong> yaml</strong></span>文件修改后代码如下&#xff1a; </p> 
<pre><code class="language-python"># YOLOv5 &#x1f680; by Ultralytics, GPL-3.0 license

# Parameters
nc: 20  # number of classes
depth_multiple: 1.0  # model depth multiple
width_multiple: 1.0  # layer channel multiple
anchors:
  - [10,13, 16,30, 33,23]  # P3/8
  - [30,61, 62,45, 59,119]  # P4/16
  - [116,90, 156,198, 373,326]  # P5/32

# YOLOv5 v6.0 backbone
backbone:
  # [from, number, module, args]
  # Shuffle_Block: [out, stride]
  [[ -1, 1, CBRM, [ 32 ] ], # 0-P2/4
   [ -1, 1, Shuffle_Block, [ 128, 2 ] ],  # 1-P3/8
   [ -1, 3, Shuffle_Block, [ 128, 1 ] ],  # 2
   [ -1, 1, Shuffle_Block, [ 256, 2 ] ],  # 3-P4/16
   [ -1, 7, Shuffle_Block, [ 256, 1 ] ],  # 4
   [ -1, 1, Shuffle_Block, [ 512, 2 ] ],  # 5-P5/32
   [ -1, 3, Shuffle_Block, [ 512, 1 ] ],  # 6
  ]

# YOLOv5 v6.0 head
head:
  [[-1, 1, Conv, [256, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, &#39;nearest&#39;]],
   [[-1, 4], 1, Concat, [1]],  # cat backbone P4
   [-1, 1, C3, [256, False]],  # 10

   [-1, 1, Conv, [128, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, &#39;nearest&#39;]],
   [[-1, 2], 1, Concat, [1]],  # cat backbone P3
   [-1, 1, C3, [128, False]],  # 14 (P3/8-small)

   [-1, 1, Conv, [128, 3, 2]],
   [[-1, 11], 1, Concat, [1]],  # cat head P4
   [-1, 1, C3, [256, False]],  # 17 (P4/16-medium)

   [-1, 1, Conv, [256, 3, 2]],
   [[-1, 7], 1, Concat, [1]],  # cat head P5
   [-1, 1, C3, [512, False]],  # 20 (P5/32-large)

   [[14, 17, 20], 1, Detect, [nc, anchors]],  # Detect(P3, P4, P5)
  ]

</code></pre> 
<hr /> 
<h4 id=" 第④步：验证是否加入成功"><span style="background-color:#ff9900;">第④步&#xff1a;验证是否加入成功</span></h4> 
<p>在<strong><span style="color:#4da8ee;">yolo.py</span> </strong>文件里面配置改为我们刚才自定义的<span style="color:#fe2c24;"><strong>yolov5s_ShuffleNetV2.yaml</strong> </span></p> 
<p><img alt="" height="385" src="https://i-blog.csdnimg.cn/blog_migrate/2e816c07b6b3a0097adc858b0116ddf8.png" width="1200" /><img alt="" height="350" src="https://i-blog.csdnimg.cn/blog_migrate/44d83f592ef8390d145c243f186f056a.png" width="1200" /></p> 
<p> 然后运行<span style="color:#4da8ee;"><strong>yolo.py</strong></span>  </p> 
<p><img alt="" height="979" src="https://i-blog.csdnimg.cn/blog_migrate/d74546a68e4d2b661bc48621895c8cab.png" width="1200" /></p> 
<p> 我们来和上次的MobileNet V3对比一下</p> 
<p><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ac6dd7c6b7ca1b97f9573d837caa6d42.png" /></p> 
<p> 可以看到替换主干网络为<span style="color:#fe2c24;"><strong>ShuffleNetV2</strong></span>之后层数变少了&#xff1b;参数量由原来的500多万减少为300多万&#xff0c;大幅度减少了&#xff1b;GFLOPs由12.2变为8.2。</p> 
<hr /> 
<h4 id="第⑤步：修改train.py中 ‘--cfg’默认参数 "><strong><span style="background-color:#dad5e9;">第⑤步&#xff1a;修改train.py中 ‘--cfg’默认参数</span></strong><span style="background-color:#dad5e9;"> </span></h4> 
<p>我们先找到<strong> train.py </strong>文件的<strong>parse_opt</strong>函数&#xff0c;然后将第二行<strong>‘--cfg’</strong>的 <strong>default</strong>改为<span style="color:#fe2c24;"><strong>&#39;models/yolov5s_ShuffleNetV2.yaml</strong> <strong>&#39;</strong></span>&#xff0c;然后就可以开始训练啦~</p> 
<p><img alt="" height="533" src="https://i-blog.csdnimg.cn/blog_migrate/65c3cce6dd5db6720d97ad01a49014fd.png" width="1200" /></p> 
<hr /> 
<p><strong>PS&#xff1a;</strong> 我用的数据集有1442张&#xff0c;训练100轮&#xff0c;用时7个小时&#xff08;更换前10个小时左右&#xff09;。证明<span style="color:#0d0016;">ShuffleNetV2的确能够大幅度提升速度&#xff0c;但是精度比原来掉了3个点&#xff0c;还是有点心疼的。</span></p> 
<hr /> 
<h2 id="本人YOLOv5系列导航">&#x1f31f;本人YOLOv5系列导航</h2> 
<p><img alt="962f7cb1b48f44e29d9beb1d499d0530.gif" height="69" src="https://i-blog.csdnimg.cn/blog_migrate/ac3c5d6bfbcbf982e8e9e3632d7f20d1.gif" width="69" />   &#x1f340;<strong><strong><strong><strong><a href="https://so.csdn.net/so/search?q&#61;YOLOv5源码&amp;spm&#61;1001.2101.3001.7020" title="YOLOv5源码">YOLOv5源码</a></strong></strong></strong>详解系列&#xff1a;</strong>  </p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129356033?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;1&#xff09;——项目目录结构解析">YOLOv5源码逐行超详细注释与解读&#xff08;1&#xff09;——项目目录结构解析</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129349094?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;2&#xff09;——推理部分detect.py">YOLOv5源码逐行超详细注释与解读&#xff08;2&#xff09;——推理部分detect.py</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129460666?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;3&#xff09;——训练部分train.py">YOLOv5源码逐行超详细注释与解读&#xff08;3&#xff09;——训练部分train.py</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129649553?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;4&#xff09;——验证部分val&#xff08;test&#xff09;.py">YOLOv5源码逐行超详细注释与解读&#xff08;4&#xff09;——验证部分val&#xff08;test&#xff09;.py</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129697521?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;5&#xff09;——配置文件yolov5s.yaml">YOLOv5源码逐行超详细注释与解读&#xff08;5&#xff09;——配置文件yolov5s.yaml</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129803802?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;6&#xff09;——网络结构&#xff08;1&#xff09;yolo.py">YOLOv5源码逐行超详细注释与解读&#xff08;6&#xff09;——网络结构&#xff08;1&#xff09;yolo.py</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129854764?spm&#61;1001.2014.3001.5501" title="YOLOv5源码逐行超详细注释与解读&#xff08;7&#xff09;——网络结构&#xff08;2&#xff09;common.py">YOLOv5源码逐行超详细注释与解读&#xff08;7&#xff09;——网络结构&#xff08;2&#xff09;common.py</a></p> 
<p><img alt="962f7cb1b48f44e29d9beb1d499d0530.gif" height="69" src="https://i-blog.csdnimg.cn/blog_migrate/ac3c5d6bfbcbf982e8e9e3632d7f20d1.gif" width="69" />   &#x1f340;<strong><strong><strong><strong><strong><strong><strong><strong><a href="https://so.csdn.net/so/search?q&#61;YOLOv5源码&amp;spm&#61;1001.2101.3001.7020" title="YOLOv5入门实践">YOLOv5入门实践</a></strong></strong></strong></strong></strong></strong></strong>系列&#xff1a;</strong>  </p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129981848?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;1&#xff09;——手把手带你环境配置搭建">YOLOv5入门实践&#xff08;1&#xff09;——手把手带你环境配置搭建</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/129995604?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;2&#xff09;——手把手教你利用labelimg标注数据集">YOLOv5入门实践&#xff08;2&#xff09;——手把手教你利用labelimg标注数据集</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130025866?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;3&#xff09;——手把手教你划分自己的数据集">YOLOv5入门实践&#xff08;3&#xff09;——手把手教你划分自己的数据集</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130043351?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;4&#xff09;——手把手教你训练自己的数据集">YOLOv5入门实践&#xff08;4&#xff09;——手把手教你训练自己的数据集</a></p> 
<p><a href="https://blog.csdn.net/weixin_43334693/article/details/130044342?spm&#61;1001.2014.3001.5501" title="YOLOv5入门实践&#xff08;5&#xff09;——从零开始&#xff0c;手把手教你训练自己的目标检测模型&#xff08;包含pyqt5界面&#xff09;">YOLOv5入门实践&#xff08;5&#xff09;——从零开始&#xff0c;手把手教你训练自己的目标检测模型&#xff08;包含pyqt5界面&#xff09;</a></p> 
<hr /> 
<p style="text-align:center;"><img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/a1c116c770f94ac258cbc31af5094bc3.gif" /></p>
                </div>
        </div>
        <div id="treeSkill"></div>
    </article>
  <script>
    $(function() {
      setTimeout(function () {
        var mathcodeList = document.querySelectorAll('.htmledit_views img.mathcode');
        if (mathcodeList.length > 0) {
          for (let i = 0; i < mathcodeList.length; i  ) {
            if (mathcodeList[i].complete) {
              if (mathcodeList[i].naturalWidth === 0 || mathcodeList[i].naturalHeight === 0) {
                var alt = mathcodeList[i].alt;
                alt = '\\('   alt   '\\)';
                var curSpan = $('<span class="img-codecogs"></span>');
                curSpan.text(alt);
                $(mathcodeList[i]).before(curSpan);
                $(mathcodeList[i]).remove();
              }
            } else {
              mathcodeList[i].onerror = function() {
                var alt = mathcodeList[i].alt;
                alt = '\\('   alt   '\\)';
                var curSpan = $('<span class="img-codecogs"></span>');
                curSpan.text(alt);
                $(mathcodeList[i]).before(curSpan);
                $(mathcodeList[i]).remove();
              };
            }
          }
          MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
        }
      }, 500)
    });
  </script>
</div>
<div class="directory-boxshadow-dialog" style="display:none;">
  <div class="directory-boxshadow-dialog-box">
  </div>
   <div class="vip-limited-time-offer-box-new" id="vip-limited-time-offer-box-new">
      <img class="limited-img limited-img-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-newWhite.png">
      <div class="vip-limited-time-top">
        确定要放弃本次机会？
      </div>
      <span class="vip-limited-time-text">福利倒计时</span>
      <div class="limited-time-box-new">
        <span class="time-hour"></span>
        <i>:</i>
        <span class="time-minite"></span>
        <i>:</i>
        <span class="time-second"></span>
      </div>
      <div class="limited-time-vip-box">
        <p>
          <img class="coupon-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-roup.png">
          <span class="def">立减 yen</span>
          <span class="active limited-num"></span>
        </p>
        <span class="">普通VIP年卡可用</span>
      </div>
      <a class="limited-time-btn-new" href="https://mall.csdn.net/vip" data-report-click='{"spm":"1001.2101.3001.9621"}' data-report-query='spm=1001.2101.3001.9621'>立即使用</a>
  </div>
</div>    <div class="more-toolbox-new" id="toolBarBox">
      <div class="left-toolbox">
        <div class="toolbox-left">
            <div class="profile-box">
              <a class="profile-href" target="_blank" href="https://jrs0511.blog.csdn.net"><img class="profile-img" src="https://profile-avatar.csdnimg.cn/da983c398fca4f14a19ea48d137f6ca3_weixin_43334693.jpg!1">
                <span class="profile-name">
                  路人贾'ω'
                </span>
              </a>
            </div>
            <div class="profile-attend">
                <a class="tool-attend tool-bt-button tool-unbt-attend" href="javascript:;" data-report-view='{"mod":"1592215036_002","spm":"1001.2101.3001.4232","extend1":"已关注"}'>已关注</a>
              <a class="tool-item-follow active-animation" style="display:none;">关注</a>
            </div>
        </div>
        <div class="toolbox-middle">
          <ul class="toolbox-list">
            <li class="tool-item tool-item-size tool-active is-like" id="is-like">
              <a class="tool-item-href">
                <img style="display:none;" id="is-like-imgactive-animation-like" class="animation-dom active-animation" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarThumbUpactive.png" alt="">
                <img class="isactive" style="display:none" id="is-like-imgactive" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2021Active.png" alt="">
                <img class="isdefault" style="display:block" id="is-like-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2021Black.png" alt="">
                <span id="spanCount" class="count ">
                    8
                </span>
              </a>
              <div class="tool-hover-tip"><span class="text space">点赞</span></div>
            </li>
            <li class="tool-item tool-item-size tool-active is-unlike" id="is-unlike">
              <a class="tool-item-href">
                <img class="isactive" style="margin-right:0px;display:none" id="is-unlike-imgactive" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newUnHeart2021Active.png" alt="">
                <img class="isdefault" style="margin-right:0px;display:block" id="is-unlike-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newUnHeart2021Black.png" alt="">
                <span id="unlikeCount" class="count "></span>
              </a>
              <div class="tool-hover-tip"><span class="text space">踩</span></div>
            </li>
            <li class="tool-item tool-item-size tool-active is-collection ">
              <a class="tool-item-href" href="javascript:;" data-report-click='{"mod":"popu_824","spm":"1001.2101.3001.4130","ab":"new"}'>
                <img style="display:none" id="is-collection-img-collection" class="animation-dom active-animation" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollectionActive.png" alt="">
                <img class="isdefault" id="is-collection-img" style="display:block" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newCollectBlack.png" alt="">
                <img class="isactive" id="is-collection-imgactive" style="display:none" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newCollectActive.png" alt="">
                <span class="count get-collection " data-num="16" id="get-collection">
                    16
                </span>
              </a>
              <div class="tool-hover-tip collect">
                <div class="collect-operate-box">
                  <span class="collect-text" id="is-collection">
                    收藏
                  </span>
                </div>
              </div>
              <div class="tool-active-list">
                <div class="text">
                  觉得还不错?
                  <span class="collect-text" id="tool-active-list-collection">
                    一键收藏
                  </span>
                 <img id="tool-active-list-close" src="https://csdnimg.cn/release/blogv2/dist/pc/img/collectionCloseWhite.png" alt="">
                </div>
              </div>
            </li>
                <li class="tool-item tool-item-size tool-active tool-item-reward">
                  <a class="tool-item-href" href="javascript:;" data-report-click='{"mod":"popu_830","spm":"1001.2101.3001.4237","dest":"","ab":"new"}'>
                    <img class="isdefault reward-bt" id="rewardBtNew" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newRewardBlack.png" alt="打赏">
                    <span class="count"></span>
                  </a>
                  <div class="tool-hover-tip"><span class="text space">打赏</span></div>
                </li>
          <li class="tool-item tool-item-size tool-active tool-item-comment">
            <div class="guide-rr-first">
              <img src="https://csdnimg.cn/release/blogv2/dist/pc/img/guideRedReward01.png" alt="">
              <button class="btn-guide-known">知道了</button>
            </div>
              <a class="tool-item-href go-side-comment" data-report-click='{"spm":"1001.2101.3001.7009"}'>
              <img class="isdefault" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newComment2021Black.png" alt="">
              <span class="count">
                  7
              </span>
            </a>
            <div class="tool-hover-tip"><span class="text space">评论</span></div>
          </li>
          <li class="tool-item tool-item-bar">
          </li>
          <li class="tool-item tool-item-size tool-active tool-QRcode" data-type="article" id="tool-share">
            <a class="tool-item-href" href="javascript:;" data-report-view='{"spm":"3001.4129","extra":{"type":"blogdetail"}}'>
              <img class="isdefault" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newShareBlack.png" alt="">
            </a>
              <div class="QRcode" id="tool-QRcode">
              <div class="share-bg-box">
                <div class="share-content">
                  <a id="copyPosterUrl" data-type="link" class="btn-share">复制链接</a>
                </div>
                <div class="share-content">
                  <a class="btn-share" data-type="qq">分享到 QQ</a>
                </div>
                <div class="share-content">
                  <a class="btn-share" data-type="weibo">分享到新浪微博</a>
                </div>
                <div class="share-code">
                  <div class="share-code-box" id='shareCode'></div>
                  <div class="share-code-text">
                    <img src="https://csdnimg.cn/release/blogv2/dist/pc/img/share/icon-wechat.png" alt="">扫一扫
                  </div>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
      <div class="toolbox-right"><script type="text/javascript" crossorigin src="https://g.csdnimg.cn/common/csdn-login-box/csdn-login-box.js"></script></html>